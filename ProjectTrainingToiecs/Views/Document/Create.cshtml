@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@using Newtonsoft.Json;
<script>
    $(document).ready(function () {
        var model = @Html.Raw(JsonConvert.SerializeObject(ViewBag.model));
        $('#type-lesson').val(model.LessonId);
    });
    $(function () {
        $('#add-document').click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            var title  = $('#title').val();
            var lessonId = $('#type-lesson').val();
            var data = {Title : title, LessonId : lessonId};
            $.ajax({
                url: "/Document/CreateDocument",
                type: "POST",
                data: data,
                success: function (result) {
                    if (result.data > 0) {
                        var url = window.location.protocol + "//" + window.location.host + '/Document/Index'
                        location.href = url;
                    } else {
                        alert('Gặp lỗi trong quá trình lưu');
                    }
                }
            });
        });
    });
</script>
<div class="container">
    <div class="row" style="margin-top: 200px">
        <div class="col-md-2"></div>
        <div class="col-md-8">
            <label>Thông tin bài học</label>
            <table class="table table-bordered">
                <tr class="hidden">
                    <td>Id</td>
                    <td><input class="form-control" type="text" value="@ViewBag.model.Id" id="id-document" /></td>
                </tr>
                <tr>
                    <td>Lesson</td>
                    <td>
                        <select id="type-lesson" class="form-control">
                            <option value="">Lựa chọn loại học</option>
                            @foreach (var x in ViewBag.lesson)
                            {
                                <option value="@x.Id">@x.Name</option>
                            }
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td><input class="form-control" type="text" value="@ViewBag.model.Title" id="title" /></td>
                </tr>
                <tr>
                    <td>Audio</td>
                    <td><input class="form-control" type="file" value="@ViewBag.model.Audio" id="audio" /></td>
                </tr>
                <tr>
                    <td>Image</td>
                    <td><input class="form-control" type="file" value="@ViewBag.model.Image" id="image" /></td>
                </tr>
                <tr>
                    <td><span class="btn btn-primary" id="add-document">Lưu</span></td>
                    <td></td>
                </tr>
            </table>
        </div>
        <div class="col-md-2"></div>
    </div>

</div>
